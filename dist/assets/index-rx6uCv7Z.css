.shape-icon{pointer-events:none;-webkit-user-select:none;user-select:none;flex-shrink:0;color:#fffffff2;filter:drop-shadow(0 0 2px rgba(0,0,0,.7)) drop-shadow(0 0 1px rgba(0,0,0,.9))}.shape-icon-grey{color:#0009;filter:drop-shadow(0 0 2px rgba(255,255,255,.5)) drop-shadow(0 0 1px rgba(255,255,255,.7))}.shape-icon-yellow{color:#000000b3;filter:drop-shadow(0 0 2px rgba(255,255,255,.4)) drop-shadow(0 0 1px rgba(255,255,255,.6))}.shape-icon-border-left.shape-icon-red{color:var(--color-red-border-left)}.shape-icon-border-left.shape-icon-orange{color:var(--color-orange-border-left)}.shape-icon-border-left.shape-icon-yellow{color:var(--color-yellow-border-left)}.shape-icon-border-left.shape-icon-green{color:var(--color-green-border-left)}.shape-icon-border-left.shape-icon-blue{color:var(--color-blue-border-left)}.shape-icon-border-left.shape-icon-purple{color:var(--color-purple-border-left)}.shape-icon-border-left.shape-icon-grey{color:var(--color-grey-border-left)}.shape-icon-border-left{filter:none}.block-visual{width:calc(100% + (2 * var(--block-overlap, 1px)));left:calc(-1 * var(--block-overlap, 1px));height:calc(100% + (2 * var(--block-overlap, 1px)));top:calc(-1 * var(--block-overlap, 1px));box-sizing:border-box;border-radius:var(--tile-border-radius);position:absolute;z-index:var(--z-block);box-shadow:inset 0 0 var(--block-shadow-inset, 10px) #0000001a;transition:transform .2s ease,opacity .2s ease,border-width var(--invalid-anim-duration, .2s) ease,box-shadow var(--invalid-anim-duration, .2s) ease;display:flex;align-items:center;justify-content:center}.block-icon-container{display:flex;align-items:center;justify-content:center;pointer-events:none}.block-color-grey{background-color:var(--color-grey-bg, #9e9e9e)}.block-color-red{background-color:var(--color-red-bg, #d63031)}.block-color-orange{background-color:var(--color-orange-bg, #fd7e14)}.block-color-yellow{background-color:var(--color-yellow-bg, #fab005)}.block-color-green{background-color:var(--color-green-bg, #2f9e44)}.block-color-blue{background-color:var(--color-blue-bg, #023f80)}.block-color-purple{background-color:var(--color-purple-bg, #7950f2)}.color-picker-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000000d9;display:flex;justify-content:center;align-items:center;z-index:var(--z-overlay);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.color-picker-content{background:linear-gradient(135deg,#667eea1a,#764ba21a);border:2px solid rgba(255,255,255,.3);border-radius:16px;padding:24px;max-width:800px;width:90%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 8px 32px #0000004d}.color-picker-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid rgba(255,255,255,.2)}.color-picker-header h2{margin:0;color:#fff;font-size:24px;font-weight:700}.close-button{background:#ffffff1a;border:1px solid rgba(255,255,255,.3);color:#fff;width:32px;height:32px;border-radius:8px;cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.close-button:hover{background:#fff3;transform:scale(1.1)}.color-picker-body{flex:1;overflow-y:auto;display:flex;gap:24px;min-height:0}.color-list{flex:0 0 200px;display:flex;flex-direction:column;gap:8px}.color-item{display:flex;align-items:center;gap:12px;padding:12px;background:#ffffff0d;border:2px solid rgba(255,255,255,.1);border-radius:8px;cursor:pointer;transition:all .2s ease}.color-item:hover{background:#ffffff1a;border-color:#ffffff4d}.color-item.selected{background:#ffffff26;border-color:#ffffff80;box-shadow:0 0 12px #fff3}.color-preview{width:40px;height:40px;position:relative;flex-shrink:0}.color-info{flex:1;display:flex;flex-direction:column;gap:4px}.color-name{color:#fff;font-weight:600;font-size:14px}.reset-color-button{background:#ff64644d;border:1px solid rgba(255,100,100,.5);color:#fff;padding:4px 8px;border-radius:4px;font-size:11px;cursor:pointer;transition:all .2s ease;align-self:flex-start}.reset-color-button:hover{background:#ff646480;transform:scale(1.05)}.color-editor{flex:1;display:flex;flex-direction:column;gap:16px;padding:16px;background:#ffffff0d;border-radius:8px;overflow-y:auto}.color-editor h3{margin:0 0 8px;color:#fff;font-size:18px;font-weight:700}.color-editor-preview{width:80px;height:80px;position:relative;align-self:center;margin:8px 0}.auto-adjust-container{margin:12px 0;padding:12px;background:#ffffff14;border-radius:8px;border:1px solid rgba(255,255,255,.2)}.auto-adjust-label{display:flex;align-items:center;gap:10px;color:#fff;font-size:14px;cursor:pointer;-webkit-user-select:none;user-select:none}.auto-adjust-label input[type=checkbox]{width:18px;height:18px;cursor:pointer}.auto-adjust-label span{flex:1}.color-inputs{display:flex;flex-direction:column;gap:12px}.color-input-group{display:flex;flex-direction:column;gap:6px}.color-input-group label{color:#ffffffe6;font-size:13px;font-weight:500}.offset-inputs{display:flex;gap:8px;margin-bottom:6px}.offset-input{flex:1;display:flex;flex-direction:column;gap:4px}.channel-label{color:#ffffffb3;font-size:11px;font-weight:600;text-align:center}.offset-input input[type=number]{background:#ffffff1a;border:1px solid rgba(255,255,255,.3);color:#fff;padding:6px 8px;border-radius:6px;font-size:13px;font-family:monospace;text-align:center;transition:all .2s ease}.offset-input input[type=number]:focus{outline:none;border-color:#ffffff80;background:#ffffff26}.hex-preview{margin-top:4px}.hex-preview input[type=text]{cursor:default;opacity:.8}.input-with-preview{display:flex;gap:8px;align-items:center}.color-input-group input[type=text]{flex:1;background:#ffffff1a;border:1px solid rgba(255,255,255,.3);color:#fff;padding:8px 12px;border-radius:6px;font-size:14px;font-family:monospace;transition:all .2s ease}.color-input-group input[type=text]:focus{outline:none;border-color:#ffffff80;background:#ffffff26}.color-swatch{width:40px;height:40px;border:2px solid rgba(255,255,255,.3);border-radius:6px;cursor:pointer;transition:transform .2s ease}.color-swatch:hover{transform:scale(1.1)}.color-picker-footer{display:flex;gap:12px;justify-content:flex-end;margin-top:20px;padding-top:16px;border-top:2px solid rgba(255,255,255,.2)}.reset-all-button,.close-footer-button{background:#ffffff1a;border:1px solid rgba(255,255,255,.3);color:#fff;padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.reset-all-button:hover,.close-footer-button:hover{background:#fff3;transform:translateY(-2px)}.reset-all-button{background:#ff64644d;border-color:#ff646480;margin-right:auto}.reset-all-button:hover{background:#ff646480}.install-pwa-button{background:linear-gradient(135deg,#4fd1c7,#2c8f87);color:#1a1a2e;font-weight:700;border:2px solid #4fd1c7;box-shadow:0 0 10px #4fd1c74d;animation:pulse-glow 2s infinite}.install-pwa-button:hover{background:linear-gradient(135deg,#6ff3e8,#3aa39a);transform:translateY(-1px);box-shadow:0 0 15px #4fd1c780}@keyframes pulse-glow{0%{box-shadow:0 0 5px #4fd1c733}50%{box-shadow:0 0 15px #4fd1c780}to{box-shadow:0 0 5px #4fd1c733}}.ios-instructions-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000c;z-index:10000;display:flex;justify-content:center;align-items:flex-end;padding-bottom:40px;animation:fadeIn .3s ease}.ios-instructions-card{background:#1a1a2e;border:2px solid #4fd1c7;border-radius:16px;padding:24px;width:90%;max-width:400px;color:#fff;box-shadow:0 10px 30px #00000080;position:relative;animation:slideUp .3s ease}.ios-instructions-card h3{margin:0 0 16px;color:#4fd1c7;text-align:center}.ios-step{display:flex;align-items:center;margin-bottom:16px;font-size:16px;line-height:1.4}.ios-icon{font-size:24px;margin-right:12px;display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#ffffff1a;border-radius:8px}.ios-close-button{position:absolute;top:12px;right:12px;background:none;border:none;color:#ffffff80;font-size:24px;cursor:pointer;padding:4px}.ios-close-button:hover{color:#fff}.menu-dropdown{position:relative;display:flex;height:100%;z-index:var(--z-floating)}.hamburger-button{background:transparent;border:none;padding:0 32px;cursor:pointer;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;border-radius:0;transition:background-color .2s ease}.hamburger-button:hover{background-color:#0000001a}.hamburger-button:active{background-color:#0003}.hamburger-lines{display:flex;flex-direction:column;justify-content:space-between;width:6vh;height:4vh}.hamburger-lines span{display:block;height:.6vh;width:100%;background-color:var(--theme-text, #333);border-radius:2px;transition:all .3s ease}.dropdown-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:var(--z-modal);background-color:#00000080;display:flex;justify-content:center;align-items:center;animation:fadeIn .2s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.dropdown-content{width:66.666vw;max-width:600px;height:66.666vh;max-height:800px;background:var(--theme-overlay-bg, linear-gradient(135deg, rgba(30, 30, 40, .95) 0%, rgba(20, 20, 30, .95) 100%));border:2px solid var(--theme-shape-selector-border, rgba(118, 75, 162, .5));border-radius:12px;box-shadow:0 10px 40px #00000080;padding:24px;animation:slideDown .3s ease;overflow-y:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;display:flex;flex-direction:column;gap:8px;color:var(--theme-text, white)}.menu-item{display:flex;align-items:center;gap:12px;padding:8px 12px;border-radius:4px;transition:background-color .2s ease;max-width:100%}.menu-item:hover{background-color:var(--theme-button-hover, rgba(255, 255, 255, .1))}.menu-label{font-size:14px;color:var(--theme-text, #eee);font-weight:500}.menu-action-button{background:none;border:1px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .2));padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;color:var(--theme-text, #eee);transition:all .2s ease;width:100%;max-width:400px;font-weight:500;text-align:center}.menu-action-button:hover{background-color:var(--theme-button-hover, rgba(102, 126, 234, .2));border-color:#667eea;color:var(--theme-text, #fff)}.menu-link-button{display:block;text-decoration:none}.debug-submenu{position:relative}.debug-toggle{background:none;border:none;width:100%;max-width:400px;display:flex;align-items:center;justify-content:space-between;padding:0;cursor:pointer;color:var(--theme-text, #eee)}.debug-arrow{font-size:12px;transition:transform .2s ease;color:var(--theme-text-secondary, #aaa)}.debug-arrow.open{transform:rotate(90deg)}.debug-submenu-content{margin-left:20px;border-left:2px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .1));padding-left:8px}.submenu-item{padding:4px 8px}.debug-action-button{background:none;border:1px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .2));padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;color:var(--theme-text, #eee);transition:all .2s ease;width:100%;max-width:400px;font-weight:500;min-height:36px}.debug-action-button:hover{background-color:var(--theme-button-hover, rgba(255, 255, 255, .1));border-color:var(--theme-text-secondary, #999)}.debug-action-button.danger{border-color:#f44;color:#c00;background-color:#fff5f5}.debug-action-button.danger:hover{background-color:#fcc;border-color:#c00}.menu-dropdown .background-music{position:static;top:auto;right:auto;z-index:auto}.menu-dropdown .toggle-switch{width:40px;height:20px}.menu-dropdown .toggle-slider{border-radius:20px}.menu-dropdown .toggle-slider:before{height:16px;width:16px;left:2px;bottom:2px}.menu-dropdown .toggle-input:checked+.toggle-slider:before{transform:translate(20px)}.menu-qr-code{margin-top:auto;display:flex;flex-direction:column;align-items:center;gap:8px;padding-top:16px;border-top:1px solid rgba(255,255,255,.1)}.qr-label{font-size:14px;color:#aaa;font-weight:500;margin:0}.qr-code-wrapper{background-color:#023f80;border-top:12px solid #2b5fa3;border-left:12px solid #184f94;border-bottom:12px solid #002352;border-right:12px solid #00306b;border-radius:4px;padding:12px;box-shadow:inset 0 0 20px #0003;display:inline-flex;justify-content:center;align-items:center}@media (max-width: 768px){.hamburger-button{margin-left:-1rem}}@media (max-width: 480px){.hamburger-button{margin-left:-.5rem}}.menu-item.theme-selector{flex-direction:column;align-items:flex-start;gap:.5rem}.theme-buttons{display:flex;gap:.5rem;flex-wrap:wrap;width:100%}.theme-button{flex:1;min-width:80px;padding:.5rem .75rem;background:#ffffff1a;color:#fff;border:2px solid transparent;border-radius:6px;font-size:.85rem;cursor:pointer;transition:all .2s ease}.theme-button:hover{background:#fff3;transform:translateY(-1px)}.theme-button.active{background:#ffffff40;border-color:#ffffff80;font-weight:700}.menu-item.volume-control{flex-direction:column;align-items:stretch;gap:8px;padding:12px}.volume-control-header{display:flex;align-items:center;gap:12px}.volume-control-header .menu-label{flex:1}.audio-waiting-badge{display:inline-flex;align-items:center;padding:3px 8px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:#fff;background:linear-gradient(135deg,#4fc3f766,#9333ea66);border:1px solid rgba(79,195,247,.5);border-radius:10px;animation:waiting-badge-pulse 2s ease-in-out infinite;cursor:pointer}.audio-waiting-badge:hover{background:linear-gradient(135deg,#4fc3f780,#9333ea80);border-color:#4fc3f7b3}@keyframes waiting-badge-pulse{0%,to{box-shadow:0 0 5px #4fc3f74d;opacity:1}50%{box-shadow:0 0 15px #4fc3f780,0 0 20px #9333ea4d;opacity:.9}}.menu-item.button-size-control{flex-direction:column;align-items:stretch;gap:8px;padding:12px}.button-size-control-header{display:flex;align-items:center;justify-content:space-between;gap:12px}.button-size-control-header .menu-label{flex:1}.button-size-control-header .reset-button{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);padding:4px 12px;border-radius:4px;color:var(--theme-text, #eee);font-size:12px;cursor:pointer;transition:all .2s ease}.button-size-control-header .reset-button:hover{background:#fff3;border-color:#ffffff4d}.menu-item.version-display{justify-content:center;padding:12px;border-top:1px solid rgba(255,255,255,.1);margin-top:8px}.version-label{font-size:12px;color:var(--theme-text-secondary, #aaa);font-weight:400;text-align:center;opacity:.7}.background-music{position:fixed;top:20px;right:20px;z-index:var(--z-floating)}.toggle-switch{position:relative;display:inline-block;width:50px;height:26px;cursor:pointer}.toggle-input{opacity:0;width:0;height:0}.toggle-slider{position:absolute;top:0;left:0;right:0;bottom:0;background-color:#ccc;border-radius:26px;transition:all .3s ease;box-shadow:0 2px 6px #0003}.toggle-slider:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;border-radius:50%;transition:all .3s ease;box-shadow:0 2px 4px #0003}.toggle-input:checked+.toggle-slider{background-color:#4caf50}.toggle-input:checked+.toggle-slider:before{transform:translate(24px)}.toggle-switch:hover .toggle-slider{box-shadow:0 4px 8px #0000004d}.toggle-switch:hover .toggle-slider:before{box-shadow:0 2px 6px #0000004d}.overlay-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;width:100dvw;height:100vh;height:100dvh;background-color:var(--theme-overlay-bg, rgba(0, 0, 0, .85));z-index:var(--z-overlay);display:flex;animation:overlay-fade-in .3s ease-out;overflow:hidden}.overlay-backdrop.overlay-centered{align-items:center;justify-content:center}.overlay-backdrop.overlay-blur{backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}.overlay-content{display:flex;flex-direction:column;max-width:calc(100vw - 32px);max-width:calc(100dvw - 32px);max-height:calc(100vh - 32px);max-height:calc(100dvh - 32px);width:fit-content;height:fit-content;overflow-y:auto;overflow-x:hidden;padding-top:env(safe-area-inset-top,0);padding-right:env(safe-area-inset-right,0);padding-bottom:env(safe-area-inset-bottom,0);padding-left:env(safe-area-inset-left,0);animation:overlay-slide-up .3s ease-out;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3) transparent}.overlay-content::-webkit-scrollbar{width:6px}.overlay-content::-webkit-scrollbar-track{background:transparent}.overlay-content::-webkit-scrollbar-thumb{background-color:#ffffff4d;border-radius:3px}.overlay-content::-webkit-scrollbar-thumb:hover{background-color:#ffffff80}.overlay-scroll-area{flex:1;min-height:0;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3) transparent}.overlay-scroll-area::-webkit-scrollbar{width:6px}.overlay-scroll-area::-webkit-scrollbar-track{background:transparent}.overlay-scroll-area::-webkit-scrollbar-thumb{background-color:#ffffff4d;border-radius:3px}.overlay-scroll-area::-webkit-scrollbar-thumb:hover{background-color:#ffffff80}@keyframes overlay-fade-in{0%{opacity:0}to{opacity:1}}@keyframes overlay-slide-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-height: 500px){.overlay-content{max-height:calc(100dvh - 16px)}}@media (max-width: 400px){.overlay-content{max-width:calc(100dvw - 16px)}}.stats-overlay-backdrop.overlay-backdrop{z-index:var(--z-modal)}.stats-overlay-content{background-color:#1a1a1a;border:1px solid #333;border-radius:12px;width:90%;max-width:800px;box-shadow:0 10px 30px #00000080;font-family:Courier New,Courier,monospace;color:#eee}.stats-header{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #333}.stats-header h2{margin:0;font-size:1.5rem;color:#fff}.close-button{background:none;border:none;color:#888;font-size:2rem;cursor:pointer;padding:0;line-height:1}.close-button:hover{color:#fff}.stats-table-header{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:15px 20px;background-color:#222;font-weight:700;border-bottom:1px solid #333;text-transform:uppercase;font-size:.9rem;color:#aaa}.header-value{text-align:right}.stats-scroll-container{overflow-y:auto;padding:0 20px 20px;flex:1}.stats-group{margin-bottom:0}.stats-group-general{background-color:#ffffff14;border-radius:8px;padding:5px 10px;margin-bottom:10px}.group-divider{height:2px;background-color:#444;margin:20px 0}.legendary-divider{height:4px;background:linear-gradient(90deg,#333,gold,#333);margin:30px 0}.stats-group-legendary .stat-label{color:gold;font-weight:700}.group-title{font-size:.8rem;color:#666;margin:10px 0 5px;text-transform:uppercase;letter-spacing:1px}.stat-row{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;padding:8px 0;align-items:center}.stat-row:hover{background-color:#ffffff0d}.stat-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.stat-value{text-align:right;font-variant-numeric:tabular-nums}.color-stat{font-size:.9em;opacity:.9;padding-left:20px}.highlight{color:gold;font-weight:700;text-shadow:0 0 5px rgba(255,215,0,.3)}.streak-indicator{margin-left:5px;font-size:.8em;vertical-align:middle}.stat-row.no-turn-streak{margin-top:10px;padding-top:15px;border-top:1px solid rgba(255,255,255,.15)}.stat-row.no-turn-streak .stat-label{color:#8bc34a;font-weight:600;font-size:1.05em}.stat-row.no-turn-streak .stat-value{color:#8bc34a;font-weight:500}.stat-row.no-turn-streak .stat-value.highlight{color:#8bc34a;font-weight:700;animation:streak-pulse 1.5s ease-in-out infinite}@keyframes streak-pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.85;transform:scale(1.02)}}.stats-scroll-container::-webkit-scrollbar{width:8px}.stats-scroll-container::-webkit-scrollbar-track{background:#1a1a1a}.stats-scroll-container::-webkit-scrollbar-thumb{background:#444;border-radius:4px}.stats-scroll-container::-webkit-scrollbar-thumb:hover{background:#555}.stats-footer{margin-top:16px;display:flex;justify-content:center;padding-top:16px;border-top:1px solid rgba(255,255,255,.1);width:100%}.new-game-button{padding:12px 24px;font-size:18px;font-weight:700;color:#fff;background:linear-gradient(135deg,#4a90e2,#357abd);border:none;border-radius:8px;cursor:pointer;box-shadow:0 4px 12px #4a90e24d;transition:all .2s ease;text-transform:uppercase;letter-spacing:1px}.pointer-container{position:fixed;pointer-events:none;z-index:2000;display:flex;align-items:center;justify-content:center}.pointer-arrow-body{display:flex;align-items:center;animation:pointerSlide .8s infinite ease-in-out;filter:drop-shadow(0 0 8px rgba(255,68,68,.6));transform:translate(-50%);will-change:transform}.pointer-arrow-shaft{width:var(--arrow-length, 100px);height:12px;background:linear-gradient(90deg,#f440,#f44);border-radius:6px}.pointer-arrow-head{width:0;height:0;border-top:15px solid transparent;border-bottom:15px solid transparent;border-left:25px solid #ff4444;margin-left:-2px}.pointer-content{position:absolute;top:40px;pointer-events:auto}@keyframes pointerSlide{0%,to{transform:translate(-60%)}50%{transform:translate(-40%)}}.error-pointer-dialog{background:#000000e6;color:#fff;padding:8px 16px;border-radius:8px;font-family:Courier New,monospace;font-weight:700;font-size:1rem;white-space:nowrap;border:1px solid #ff4444;box-shadow:0 0 10px #ff44444d;pointer-events:none}.call-to-action-pointer-container{display:flex;align-items:center;gap:8px;background:#0064c8f2;padding:8px 12px;border-radius:8px;border:1px solid #4fc3f7;box-shadow:0 0 15px #4fc3f766}.call-to-action-pointer-message{color:#fff;font-family:Courier New,monospace;font-weight:700;font-size:1rem;white-space:nowrap}.call-to-action-pointer-dismiss{background:#fff3;border:1px solid rgba(255,255,255,.3);color:#fff;border-radius:4px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px;font-weight:700;transition:all .2s ease;padding:0}.call-to-action-pointer-dismiss:hover{background:#ffffff4d;border-color:#ffffff80;transform:scale(1.1)}.call-to-action-pointer-dismiss:active{transform:scale(.95)}.error-pulse{animation:errorPulse .4s ease-in-out 3}@keyframes errorPulse{0%,to{transform:scale(1);box-shadow:0 4px 15px #0000004d;border-color:#fff3}50%{transform:scale(1.1);box-shadow:0 0 30px #ff3232cc;background:linear-gradient(145deg,#ff323266,#ff323233);border-color:#ff6464cc}}.score-display{display:flex;align-items:center;justify-content:center;gap:clamp(.5rem,1vw,1rem);font-family:Courier New,monospace;color:var(--theme-text, #ffffff);background:var(--theme-button-bg, linear-gradient(145deg, rgba(255, 255, 255, .15), rgba(255, 255, 255, .05)));-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .2));box-shadow:0 4px 15px #0000004d;transition:all .3s ease;height:calc(100% - 8px);margin:4px 0;flex:0 0 auto;padding:0 clamp(1rem,2vw,2rem)}.score-display:hover{background:var(--theme-button-hover, linear-gradient(145deg, rgba(255, 255, 255, .25), rgba(255, 255, 255, .15)));transform:translateY(-2px);box-shadow:0 6px 20px #0006}.blue-gem-icon{filter:drop-shadow(0 0 4px rgba(65,105,225,.6));flex-shrink:0;height:calc(100% - 8px);width:auto;min-height:clamp(32px,8vh,64px)}.score-display-value{font-weight:700;color:var(--theme-text, #ffffff);text-shadow:var(--theme-text-shadow, none);font-size:clamp(1.2rem,5vh,2.5rem);line-height:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;text-align:right;padding-right:1rem}.score-display-pulsing{animation:scorePulse 2s infinite ease-in-out}@keyframes scorePulse{0%{transform:scale(1);box-shadow:0 4px 15px #0000004d}50%{transform:scale(1.05);box-shadow:0 0 25px #4a90e2cc;background:linear-gradient(145deg,#4a90e266,#4a90e233);border-color:#fff9}to{transform:scale(1);box-shadow:0 4px 15px #0000004d}}@media (max-width: 768px){.score-display{padding:0 clamp(.75rem,1.5vw,1.25rem);gap:clamp(.4rem,.8vw,.75rem);height:calc(100% - 6px);margin:3px 0}.blue-gem-icon{min-height:clamp(24px,6vh,48px);height:calc(100% - 6px)}.score-display-value{font-size:clamp(1rem,4vh,2rem)}}@media (max-width: 480px){.score-display{padding:0 clamp(.5rem,1vw,.75rem);gap:.3rem;height:calc(100% - 4px);margin:2px 0}.blue-gem-icon{min-height:clamp(20px,5vh,40px);height:calc(100% - 4px)}.score-display-value{font-size:clamp(.9rem,3.5vh,1.5rem)}}.audio-unlock-indicator{position:relative;display:flex;align-items:center;gap:8px;padding:8px 16px;background:linear-gradient(135deg,#4fc3f733,#9333ea33);border:1px solid rgba(79,195,247,.4);border-radius:20px;cursor:pointer;animation:unlock-indicator-attention 2s ease-in-out infinite;transition:all .3s ease;overflow:hidden}.audio-unlock-indicator:hover{background:linear-gradient(135deg,#4fc3f74d,#9333ea4d);border-color:#4fc3f799;transform:scale(1.02)}.audio-unlock-icon{display:flex;align-items:center;justify-content:center;color:#4fc3f7;animation:icon-bounce 1.5s ease-in-out infinite}.audio-unlock-text{font-size:12px;font-weight:500;color:#ffffffe6;white-space:nowrap}.audio-unlock-pulse{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:20px;border:2px solid rgba(79,195,247,.6);animation:pulse-ring 2s ease-out infinite;pointer-events:none}@keyframes unlock-indicator-attention{0%,to{box-shadow:0 0 10px #4fc3f74d}50%{box-shadow:0 0 20px #4fc3f780,0 0 30px #9333ea4d}}@keyframes icon-bounce{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@keyframes pulse-ring{0%{transform:scale(1);opacity:1}to{transform:scale(1.3);opacity:0}}.audio-unlock-indicator.compact{padding:4px 10px;gap:6px;border-radius:16px}.audio-unlock-indicator.compact .audio-unlock-text{font-size:11px}.audio-unlock-indicator.compact .audio-unlock-icon svg{width:16px;height:16px}.audio-unlock-indicator.toast{position:fixed;top:60px;left:50%;transform:translate(-50%);z-index:1000;box-shadow:0 4px 20px #0006}@media (max-width: 480px){.audio-unlock-text{font-size:11px}.audio-unlock-indicator{padding:6px 12px;gap:6px}}.header{display:flex;justify-content:space-between;align-items:center;width:100%;height:10vh;background-color:var(--theme-header-bg, rgb(25, 25, 25));box-shadow:0 4px 20px #0000004d;border-bottom:2px solid var(--theme-header-border, rgba(255, 255, 255, .1));position:relative;overflow:hidden;z-index:var(--z-ui)}.header:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(180deg,#ffffff1a,#0000001a);pointer-events:none}.header>*{position:relative;z-index:1}.header-center{display:flex;justify-content:center;align-items:center;flex-grow:1;height:100%}.back-button{background:transparent;border:none;padding:0 24px;cursor:pointer;display:flex;align-items:center;justify-content:center;height:100%;color:var(--theme-text, rgb(255, 255, 255));transition:background-color .2s ease,opacity .2s ease}.back-button:hover{background-color:#ffffff1a}.back-button:active{opacity:.7}.back-button svg{width:32px;height:32px}.audio-unlock-toast{position:fixed;top:calc(10vh + 16px);left:50%;transform:translate(-50%);z-index:var(--z-overlay, 1000);animation:toast-slide-in .3s ease-out}@keyframes toast-slide-in{0%{opacity:0;transform:translate(-50%) translateY(-10px)}to{opacity:1;transform:translate(-50%) translateY(0)}}@media (max-width: 768px){.header{height:8vh;min-height:60px}}@media (max-width: 480px){.header{height:7vh;min-height:50px}}.tetrix{display:flex;align-items:center;justify-content:center;width:100%;height:90vh;position:relative;gap:20px;overflow:hidden;box-sizing:border-box}@media (max-aspect-ratio: 1/1){.tetrix{flex-direction:column;align-content:center}}@media (min-aspect-ratio: 1/1){.tetrix{flex-direction:row}}.grid{display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr);position:relative;touch-action:none;gap:var(--grid-gap);width:var(--grid-size);height:var(--grid-size);padding:var(--grid-gap);box-sizing:content-box}.grid.grid-editor-mode{outline:2px dashed rgba(33,150,243,.5);outline-offset:4px;background-color:#2196f30d;width:auto;height:auto}.grid.grid-editor-mode:hover{outline-color:#2196f3b3;background-color:#2196f31a}.tile-base{border-radius:var(--tile-border-radius);position:relative;z-index:var(--z-board);transition:background-color .2s ease;--block-overlap: 1px;display:flex;align-items:center;justify-content:center}.tile-icon-background{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:0}.tile-base-dark{background-color:var(--theme-tile-bg, rgb(59, 59, 62))}.tile-base-light{background-color:var(--theme-tile-bg, rgb(40, 40, 50))}.tile-base-custom.color-bg-grey{background-color:#616161}.tile-base-custom.color-bg-red{background-color:#c62828}.tile-base-custom.color-bg-orange{background-color:#e65100}.tile-base-custom.color-bg-yellow{background-color:#f9a825}.tile-base-custom.color-bg-green{background-color:#2e7d32}.tile-base-custom.color-bg-blue{background-color:#1565c0}.tile-base-custom.color-bg-purple{background-color:#6a1b9a}.tetrix-tile-shadow{position:absolute;top:0;left:0;right:0;bottom:0;background-color:#000;pointer-events:none;border-radius:var(--tile-border-radius);opacity:var(--shadow-opacity, 0)}.tetrix-tile-clearing{position:absolute;top:5px;left:5px;right:5px;bottom:5px;border:5px solid var(--animation-color, var(--theme-animation-color, rgba(100, 100, 100, .8)));border-radius:var(--tile-border-radius);pointer-events:none;z-index:10}.tetrix-tile-clearing.row-cw{animation:tile-clear-row-cw var(--animation-duration, .5s) cubic-bezier(.4,0,.2,1) forwards;animation-delay:var(--animation-delay, 0ms)}.tetrix-tile-clearing.column-ccw{animation:tile-clear-column-ccw var(--animation-duration, .5s) cubic-bezier(.4,0,.2,1) forwards;animation-delay:var(--animation-delay, 0ms)}.tetrix-tile-clearing.column-double{animation:tile-clear-column-double var(--animation-duration, .5s) cubic-bezier(.4,0,.2,1) forwards;animation-delay:var(--animation-delay, 0ms);z-index:11}.tetrix-tile-clearing.row-double{animation:tile-clear-row-double var(--animation-duration, .5s) cubic-bezier(.4,0,.2,1) forwards;animation-delay:var(--animation-delay, 0ms);z-index:11}.tetrix-tile-clearing.row-triple{animation:tile-clear-row-triple var(--animation-duration, .6s) cubic-bezier(.4,0,.2,1) forwards;animation-delay:var(--animation-delay, 0ms);z-index:12;border-width:3px}.tetrix-tile-clearing.column-triple{animation:tile-clear-column-triple var(--animation-duration, .6s) cubic-bezier(.4,0,.2,1) forwards;animation-delay:var(--animation-delay, 0ms);z-index:12;border-width:3px}.tetrix-tile-clearing.row-quad{animation:tile-clear-row-quad-beat var(--animation-duration, .4s) ease-in-out var(--animation-delay, 0ms) var(--beat-count, 3) forwards,tile-clear-quad-finish var(--finish-duration, .4s) ease-in-out calc(var(--animation-delay, 0ms) + (var(--animation-duration, .4s) * var(--beat-count, 3))) 1 forwards;z-index:13}.tetrix-tile-clearing.column-quad{animation:tile-clear-column-quad-beat var(--animation-duration, .4s) ease-in-out var(--animation-delay, 0ms) var(--beat-count, 3) forwards,tile-clear-quad-finish var(--finish-duration, .4s) ease-in-out calc(var(--animation-delay, 0ms) + (var(--animation-duration, .4s) * var(--beat-count, 3))) 1 forwards;z-index:13}.tetrix-tile-clearing.full-board-columns{animation:tile-clear-full-board-columns var(--animation-duration, .8s) cubic-bezier(.22,1,.36,1) forwards;animation-delay:var(--animation-delay, 0ms);z-index:14;border-width:4px}.tetrix-tile-clearing.full-board-rows{animation:tile-clear-full-board-rows var(--animation-duration, .8s) cubic-bezier(.22,1,.36,1) forwards;animation-delay:var(--animation-delay, 0ms);z-index:15;border-width:4px}@keyframes tile-clear-row-cw{0%{transform:rotate(0);border-radius:2px;opacity:1}to{transform:rotate(90deg);border-radius:50%;top:calc(50% - 2.5px);left:calc(50% - 2.5px);right:calc(50% - 2.5px);bottom:calc(50% - 2.5px);opacity:0}}@keyframes tile-clear-column-ccw{0%{transform:rotate(0);border-radius:2px;opacity:1}to{transform:rotate(-90deg);border-radius:50%;top:calc(50% - 2.5px);left:calc(50% - 2.5px);right:calc(50% - 2.5px);bottom:calc(50% - 2.5px);opacity:0}}@keyframes tile-clear-column-double{0%{transform:rotate(0) scale(1);border-radius:2px;opacity:1}25%{transform:rotate(45deg) scale(1.5);border-radius:8px;opacity:.9}50%{transform:rotate(90deg) scale(1);border-radius:20px;opacity:.6}to{transform:rotate(90deg) scale(1);border-radius:50%;top:calc(50% - 2.5px);left:calc(50% - 2.5px);right:calc(50% - 2.5px);bottom:calc(50% - 2.5px);opacity:0}}@keyframes tile-clear-row-double{0%{transform:rotate(0) scale(1);border-radius:2px;opacity:1}25%{transform:rotate(-45deg) scale(1.5);border-radius:8px;opacity:.9}50%{transform:rotate(-90deg) scale(1);border-radius:20px;opacity:.6}to{transform:rotate(-90deg) scale(1);border-radius:50%;top:calc(50% - 2.5px);left:calc(50% - 2.5px);right:calc(50% - 2.5px);bottom:calc(50% - 2.5px);opacity:0}}@keyframes tile-clear-row-triple{0%{transform:rotate(0) scale(.5);border-radius:50%;opacity:.3;clip-path:circle(50%)}75%{transform:rotate(360deg) scale(1.2);border-radius:15%;opacity:1;clip-path:polygon(30% 0%,70% 0%,100% 30%,100% 70%,70% 100%,30% 100%,0% 70%,0% 30%);top:0;left:0;right:0;bottom:0}to{transform:rotate(360deg) scale(1.2);border-radius:15%;opacity:0;clip-path:polygon(30% 0%,70% 0%,100% 30%,100% 70%,70% 100%,30% 100%,0% 70%,0% 30%);top:0;left:0;right:0;bottom:0}}@keyframes tile-clear-column-triple{0%{transform:rotate(0) scale(.5);border-radius:50%;opacity:.3;clip-path:circle(50%)}75%{transform:rotate(-360deg) scale(1.2);border-radius:15%;opacity:1;clip-path:polygon(30% 0%,70% 0%,100% 30%,100% 70%,70% 100%,30% 100%,0% 70%,0% 30%);top:0;left:0;right:0;bottom:0}to{transform:rotate(-360deg) scale(1.2);border-radius:15%;opacity:0;clip-path:polygon(30% 0%,70% 0%,100% 30%,100% 70%,70% 100%,30% 100%,0% 70%,0% 30%);top:0;left:0;right:0;bottom:0}}@keyframes tile-clear-row-quad-beat{0%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}15%{border-radius:20%;border-width:4px;opacity:1;top:32%;left:32%;right:32%;bottom:32%}24%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}30%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}42%{border-radius:10%;border-width:6px;opacity:1;top:25%;left:25%;right:25%;bottom:25%}54%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}60%,to{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}}@keyframes tile-clear-column-quad-beat{0%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}15%{border-radius:20%;border-width:4px;opacity:1;top:32%;left:32%;right:32%;bottom:32%}24%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}30%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}42%{border-radius:10%;border-width:6px;opacity:1;top:25%;left:25%;right:25%;bottom:25%}54%{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}60%,to{border-radius:50%;border-width:3px;opacity:1;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}}@keyframes tile-clear-quad-finish{0%{transform:scale(1);opacity:1;border-radius:50%;border-width:3px;top:37.5%;left:37.5%;right:37.5%;bottom:37.5%}to{transform:scale(0);opacity:0;border-radius:50%;border-width:0px;top:50%;left:50%;right:50%;bottom:50%}}@keyframes tile-clear-full-board-columns{0%{transform:rotate(0) scale(1);border-radius:2px;opacity:1;border-width:4px}40%{transform:rotate(180deg) scale(1.3);border-radius:30%;opacity:1;border-width:5px}70%{transform:rotate(360deg) scale(.7);border-radius:50%;opacity:.8;border-width:3px}to{transform:rotate(540deg) scale(0);border-radius:50%;opacity:0;border-width:0px;top:50%;left:50%;right:50%;bottom:50%}}@keyframes tile-clear-full-board-rows{0%{transform:rotate(0) scale(1);border-radius:2px;opacity:1;border-width:4px}30%{transform:rotate(-90deg) scale(1.5);border-radius:20%;opacity:1;border-width:6px;box-shadow:0 0 15px #fffc}60%{transform:rotate(-180deg) scale(1.2);border-radius:40%;opacity:.9;border-width:4px;box-shadow:0 0 25px #fff9}to{transform:rotate(-360deg) scale(0);border-radius:50%;opacity:0;border-width:0px;box-shadow:0 0 #fff0;top:50%;left:50%;right:50%;bottom:50%}}.shape-queue{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap;border:2px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .3));border-radius:12px;background:var(--theme-shape-selector-bg, linear-gradient(135deg, rgba(102, 126, 234, .2) 0%, rgba(118, 75, 162, .2) 50%, rgba(240, 147, 251, .2) 100%));padding:12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);width:fit-content;height:fit-content;max-width:100vw;max-height:100vh;overflow:visible;box-sizing:border-box}@media (max-aspect-ratio: 1/1){.shape-queue{flex-direction:row;gap:12px;align-items:center;min-height:auto}}@media (min-aspect-ratio: 1/1){.shape-queue{flex-direction:column;gap:12px;align-items:center;height:fit-content;max-height:100%;overflow:hidden;align-content:flex-start;justify-content:flex-start}}@media (max-width: 480px){.shape-queue{gap:8px;max-height:50vh;padding:8px}}.shape-selector{flex-basis:100%;display:flex;justify-content:center;align-items:center}.shape-selector-shape-wrapper{width:var(--game-controls-button-size);height:var(--game-controls-button-size);transition:width .3s cubic-bezier(.25,1,.5,1),height .3s cubic-bezier(.25,1,.5,1),opacity .3s cubic-bezier(.25,1,.5,1);flex-shrink:0}.shape-selector-shape-wrapper[data-landscape="0"],.shape-selector-shape-wrapper[data-landscape="1"]{margin:0}.shape-selector-shape-wrapper.removing{opacity:0;width:0;height:0}.shape-selector-empty-placeholder{display:flex;align-items:center;justify-content:center;border:2px dashed rgba(255,255,255,.3);border-radius:8px;background:#0003;pointer-events:none}.empty-queue-message{font-size:14px;font-weight:500;color:#fff9;text-align:center;-webkit-user-select:none;user-select:none}.shape-option-container{cursor:pointer;touch-action:none;transform-origin:center;pointer-events:auto;-webkit-tap-highlight-color:transparent}.shape-option-container.selected{pointer-events:none}.shape-display{display:grid;grid-template-columns:repeat(4,var(--shape-cell-size));grid-template-rows:repeat(4,var(--shape-cell-size));gap:var(--shape-cell-gap);width:100%;height:100%;justify-content:center;align-content:center;overflow:hidden}.shape-display>*{transform:translate(var(--centering-offset-x, 0px),var(--centering-offset-y, 0px))}.shape-display-tile{position:relative;opacity:1;width:var(--shape-cell-size);height:var(--shape-cell-size)}.purchasable-slot-option{width:var(--game-controls-button-size);height:var(--game-controls-button-size);display:flex;align-items:center;justify-content:center;border-radius:8px;border:2px dashed rgba(255,255,255,.3);background:#0006;cursor:not-allowed;transition:all .2s ease;-webkit-user-select:none;user-select:none;transition:width .3s cubic-bezier(.25,1,.5,1),height .3s cubic-bezier(.25,1,.5,1),opacity .3s cubic-bezier(.25,1,.5,1),border-color .2s ease,background-color .2s ease,transform .2s ease}.purchasable-slot-option.affordable{border-color:#ffd70099;background:#ffd7001a;cursor:pointer;animation:pulse-glow 2s ease-in-out infinite}.purchasable-slot-option.affordable:hover{transform:scale(1.05);border-color:#ffd700e6;background:#ffd70033}.purchasable-slot-option.affordable:active{transform:scale(.95)}.purchasable-slot-option.removing{opacity:0;width:0;height:0}.purchasable-slot-content{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}.lock-icon{font-size:24px;margin-bottom:4px}.slot-label{font-size:12px;font-weight:600;color:#fffc;text-align:center}.cost-display{display:flex;align-items:center;gap:4px;font-size:14px;font-weight:700;color:#ffffffe6}.cost-amount{color:gold}.cost-icon{font-size:16px}.purchasable-slot-option.affordable .lock-icon{animation:bounce 1s ease-in-out infinite}.purchasable-slot-option.affordable .cost-display{color:gold}@keyframes pulse-glow{0%,to{box-shadow:0 0 5px #ffd7004d}50%{box-shadow:0 0 15px #ffd70099}}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.shape-producer-viewport{display:flex;justify-content:flex-start;align-items:center;flex-wrap:nowrap;overflow:hidden;gap:0;flex:0 0 auto;box-sizing:content-box}.shape-producer-viewport.landscape{flex-direction:column;width:var(--game-controls-button-size);height:calc(4 * var(--game-controls-button-size))}.shape-producer-viewport.portrait{flex-direction:row;width:calc(4 * var(--game-controls-button-size));height:var(--game-controls-button-size)}.queue-indicator{position:relative;width:calc(var(--game-controls-button-size) * .5);height:calc(var(--game-controls-button-size) * .5);flex-shrink:0;background:var(--theme-button-bg, rgba(255, 255, 255, .1));border:2px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .3));border-radius:8px;color:var(--theme-text, rgb(255, 255, 255));font-size:18px;font-weight:600;display:flex;align-items:center;justify-content:center;transition:all .2s ease;cursor:pointer;padding:0;margin:0}.queue-indicator-infinite{cursor:not-allowed;opacity:.6}.queue-indicator-infinite:hover{background:var(--theme-button-bg, rgba(255, 255, 255, .1));transform:none}.queue-indicator-finite{cursor:pointer}.queue-indicator-finite:hover{background:var(--theme-button-hover, rgba(255, 255, 255, .2));transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.queue-indicator-finite:active{transform:translateY(0)}.queue-indicator-infinity{font-size:24px;line-height:1}.queue-indicator-count{font-size:18px;line-height:1;font-weight:700}.queue-overlay-content{position:relative;width:90vw;max-width:600px;background:var(--theme-overlay-bg, rgba(0, 0, 0, .85));border:2px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .3));border-radius:16px;box-shadow:0 20px 60px #0009;padding:24px;color:var(--theme-text, white)}.queue-overlay-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .2))}.queue-overlay-header h2{margin:0;font-size:24px;font-weight:600;color:var(--theme-text, white)}.queue-overlay-close{background:none;border:none;font-size:28px;color:var(--theme-text-secondary, #aaa);cursor:pointer;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease;padding:0}.queue-overlay-close:hover{background-color:var(--theme-button-hover, rgba(255, 255, 255, .1));color:var(--theme-text, white)}.queue-overlay-body{flex:1;overflow-y:auto;overflow-x:hidden}.queue-overlay-empty{text-align:center;color:var(--theme-text-secondary, #aaa);font-size:16px;padding:40px 20px}.queue-overlay-shapes{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,120px));gap:12px;padding:8px;justify-content:center}.queue-overlay-shape{background:var(--theme-button-bg, rgba(255, 255, 255, .05));border:2px solid var(--theme-shape-selector-border, rgba(255, 255, 255, .2));border-radius:8px;padding:8px;display:flex;flex-direction:column;align-items:stretch;gap:6px;min-height:0;max-width:120px}.queue-overlay-shape-label{font-size:14px;font-weight:600;color:var(--theme-text-secondary, #aaa);text-align:center;flex-shrink:0}.queue-overlay-shape>.shape-display{width:100%;aspect-ratio:1;flex:1;min-height:0}@media (max-width: 768px){.queue-overlay-content{width:95vw;padding:20px 16px;max-height:90vh}.queue-overlay-header h2{font-size:20px}.queue-overlay-shapes{grid-template-columns:repeat(auto-fit,minmax(70px,100px));gap:10px}.queue-overlay-shape{max-width:100px;padding:6px}}@media (max-width: 480px){.queue-overlay-shapes{grid-template-columns:repeat(auto-fit,minmax(60px,90px));gap:8px}.queue-overlay-shape{max-width:90px;padding:6px;gap:4px}.queue-overlay-shape-label{font-size:12px}}.purchases-container{display:flex;flex-direction:column;gap:12px;padding:12px;border:none;border-radius:12px;background:transparent;box-shadow:none;-webkit-backdrop-filter:none;backdrop-filter:none;align-items:center;justify-content:center;width:auto;height:auto}.purchases-container-button{width:var(--game-controls-button-size);height:var(--game-controls-button-size);min-width:var(--game-controls-button-size);min-height:var(--game-controls-button-size);max-width:var(--game-controls-button-size);max-height:var(--game-controls-button-size);background:var(--theme-button-bg, rgba(0, 0, 0, .8));border:2px solid #4a90e2;border-radius:8px;color:var(--theme-text, white);font-size:12px;font-weight:700;cursor:pointer;transition:all .2s ease-in-out;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:4px;position:relative;box-shadow:0 2px 4px #0003;box-sizing:border-box;overflow:hidden;-webkit-tap-highlight-color:transparent}.purchases-container-button:focus{outline:none}@media (hover: hover){.purchases-container-button:hover:not(.disabled){background:var(--theme-button-hover, rgba(74, 144, 226, .2));border-color:#5ba3f5;transform:translateY(-1px);box-shadow:0 4px 8px #0000004d}}.purchases-container-button:active:not(.disabled){transform:translateY(0);box-shadow:0 2px 4px #0003}.purchases-container-button.disabled{background:var(--theme-button-bg, rgba(0, 0, 0, .4));border-color:var(--theme-text-secondary, #666);color:var(--theme-text-secondary, #999);opacity:.5;cursor:pointer;transform:none;box-shadow:0 1px 2px #0000001a}.purchases-container-button.active{background:#4a90e299;border-color:#5ba3f5;box-shadow:0 0 12px #4a90e299,0 0 24px #4a90e266;animation:purchases-container-glow 1.5s ease-in-out infinite alternate}@keyframes purchases-container-glow{0%{box-shadow:0 0 12px #4a90e299,0 0 24px #4a90e266}to{box-shadow:0 0 16px #4a90e2cc,0 0 32px #4a90e299}}.purchases-container-icon{font-size:calc(var(--game-controls-button-size) * .5);font-weight:700;line-height:1;flex:2;display:flex;align-items:center;justify-content:center}.purchases-container-cost{font-size:calc(var(--game-controls-button-size) * .25);opacity:.8;flex:1;display:flex;align-items:center;justify-content:center}.purchases-container-button.active .purchases-container-icon{color:#fff;text-shadow:0 0 8px rgba(255,255,255,.8)}.purchases-container-button.active .purchases-container-cost{opacity:.6}@media (max-aspect-ratio: 1/1){.purchases-container{flex-direction:row;width:auto;height:auto;gap:12px;min-height:auto}}@media (min-aspect-ratio: 1/1){.purchases-container{flex-direction:column;height:auto;gap:12px;max-height:100%;overflow:hidden;align-content:flex-start;justify-content:flex-start}}@media (max-width: 480px){.purchases-container{gap:8px;padding:8px}}.game-controls-panel{display:flex;align-items:center;justify-content:space-around;overflow:hidden;box-sizing:border-box}@media (max-aspect-ratio: 1/1){.game-controls-panel{flex-direction:column;align-items:center;justify-content:space-around}}@media (min-aspect-ratio: 1/1){.game-controls-panel{flex-direction:row;align-items:center;justify-content:space-around}}.gem-particle{position:fixed;font-size:2rem;font-weight:700;pointer-events:none;z-index:var(--z-particles);-webkit-user-select:none;user-select:none;transform-style:preserve-3d;backface-visibility:hidden;-webkit-font-smoothing:antialiased;filter:drop-shadow(0 0 6px rgba(65,105,225,.8));transform:translate3d(var(--particle-x),var(--particle-y),0) translate(-50%,-50%);opacity:var(--particle-opacity);will-change:transform,opacity;display:block;width:fit-content;height:fit-content}.gem-particle svg{display:block;width:100%;height:100%}.gem-shower-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--z-particles);overflow:hidden;will-change:contents;contain:layout style paint}.game-over-overlay.overlay-backdrop{position:absolute}.game-over-content{display:flex;flex-direction:column;align-items:center;gap:24px;text-align:center;padding:32px}.game-over-title{font-size:48px;font-weight:800;color:var(--theme-text, white);margin:0;text-transform:uppercase;letter-spacing:2px;text-shadow:0 4px 12px rgba(0,0,0,.5)}.game-over-subtitle{font-size:18px;color:var(--theme-text-secondary, rgba(255, 255, 255, .8));margin:0;max-width:300px;line-height:1.5}.new-game-button{margin-top:16px;padding:16px 32px;font-size:20px;font-weight:700;color:#fff;background:linear-gradient(135deg,#4a90e2,#357abd);border:none;border-radius:12px;cursor:pointer;box-shadow:0 4px 12px #4a90e24d;transition:all .2s ease;text-transform:uppercase;letter-spacing:1px}.new-game-button:hover{transform:translateY(-2px);box-shadow:0 6px 16px #4a90e266;background:linear-gradient(135deg,#5aa0f2,#458acd)}.new-game-button:active{transform:translateY(1px);box-shadow:0 2px 8px #4a90e24d}.map-completion-overlay.overlay-backdrop{background-color:#000000f2}.map-completion-content{width:100%;height:100%;max-width:100%;max-height:100%;display:flex;align-items:center;justify-content:center}.map-completion-scroll-area{display:flex;gap:2rem;align-items:center;padding:2rem;max-width:95vw;max-height:calc(100dvh - 32px);overflow-y:auto;overflow-x:hidden}.completion-grid-preview{flex-shrink:0;pointer-events:none;opacity:.9;filter:brightness(.8)}.completion-details{display:flex;flex-direction:column;align-items:center;gap:1.5rem;padding:2rem;background:linear-gradient(145deg,#1a1a2e,#16213e);border:3px solid rgba(74,158,255,.3);border-radius:20px;min-width:400px;max-width:500px}.completion-title{font-size:3rem;font-weight:800;margin:0;text-transform:uppercase;letter-spacing:2px;text-shadow:0 4px 12px rgba(0,0,0,.5)}.completion-title.success{color:#4caf50;text-shadow:0 0 20px rgba(76,175,80,.5)}.completion-title.failure{color:#f44336;text-shadow:0 0 20px rgba(244,67,54,.5)}.star-rating{display:flex;gap:1rem;font-size:4rem;margin:1rem 0}.star{transition:all .3s ease;filter:drop-shadow(0 4px 8px rgba(0,0,0,.3))}.star.filled{color:gold;text-shadow:0 0 20px rgba(255,215,0,.8);animation:starPulse 2s ease-in-out infinite}.star.empty{color:#fff3;text-shadow:none}@keyframes starPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.completion-stats{width:100%;display:flex;flex-direction:column;gap:.75rem;padding:1rem;background:#0000004d;border-radius:12px;border:1px solid rgba(255,255,255,.1)}.stat-row{display:flex;justify-content:space-between;align-items:center;font-family:Courier New,monospace;font-size:1.2rem}.stat-label{color:#ffffffb3;font-weight:600}.stat-value{color:#fff;font-weight:700;font-size:1.4rem}.stat-value.perfect{color:#4caf50}.stat-value.miss{color:#ff9800}.rating-description,.failure-message{text-align:center;color:#fffc;line-height:1.6;font-size:1.1rem;padding:0 1rem}.rating-description p,.failure-message p{margin:.5rem 0}.failure-message{color:#ff6464e6}.completion-actions{display:flex;gap:1rem;width:100%;margin-top:1rem}.retry-button,.continue-button{flex:1;padding:1rem 2rem;font-size:1.2rem;font-weight:700;font-family:Courier New,monospace;border-radius:12px;border:2px solid;cursor:pointer;transition:all .2s ease;text-transform:uppercase;letter-spacing:1px}.retry-button{background:linear-gradient(145deg,#ff9800,#f57c00);border-color:#e65100;color:#fff}.retry-button:hover{background:linear-gradient(145deg,#ffa726,#fb8c00);transform:translateY(-2px);box-shadow:0 6px 16px #ff980066}.continue-button{background:linear-gradient(145deg,#4a90e2,#357abd);border-color:#2c5f87;color:#fff}.continue-button:hover{background:linear-gradient(145deg,#5ba0f2,#4080cd);transform:translateY(-2px);box-shadow:0 6px 16px #4a90e266}@media (max-width: 1024px){.map-completion-scroll-area{flex-direction:column;gap:1rem}.completion-details{min-width:unset;width:90%}}@media (max-width: 768px){.completion-title{font-size:2rem}.star-rating{font-size:3rem}.stat-row{font-size:1rem}.stat-value{font-size:1.2rem}.completion-details{padding:1.5rem}.completion-actions{flex-direction:column}.retry-button,.continue-button{width:100%}}.full-screen-button{position:absolute;display:flex;justify-content:center;align-items:center;font-size:4em;bottom:1em;right:1em;top:auto;left:auto;width:2em;height:2em;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:var(--theme-text, white);box-shadow:0 4px 10px #0000004d;border:none;padding:.5em 1em;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.full-screen-button:hover{transform:scale(1.05);box-shadow:0 6px 15px #0006}.full-screen-button:active{transform:scale(.95)}.dragging-shape-container{position:fixed;pointer-events:none;z-index:var(--z-drag);display:grid;transition:none;top:var(--container-top);left:var(--container-left);grid-template-columns:repeat(4,var(--tile-size));grid-template-rows:repeat(4,var(--tile-size));gap:var(--grid-gap);transform:scale(var(--scale))}.dragging-shape-cell{position:relative;width:var(--tile-size);height:var(--tile-size)}.dragging-phase .dragging-shape-cell{transition:width .2s,height .2s,transform .2s}.wiggle-wrapper{width:100%;height:100%;margin:0;transition:width var(--invalid-anim-duration, .2s) ease,height var(--invalid-anim-duration, .2s) ease,margin var(--invalid-anim-duration, .2s) ease}@keyframes wiggle{0%{transform:rotate(0)}25%{transform:rotate(5deg)}75%{transform:rotate(-5deg)}to{transform:rotate(0)}}.invalid-cell .wiggle-wrapper{width:50%;height:50%;margin:25%;animation:wiggle var(--invalid-anim-duration, .2s) linear infinite;animation-delay:var(--wiggle-delay)}.toast-overlay-container{position:fixed;bottom:20px;left:50%;transform:translate(-50%);display:flex;flex-direction:column;gap:10px;z-index:var(--z-toast);pointer-events:none}.toast-message{background-color:#000c;color:#fff;padding:12px 24px;border-radius:8px;font-size:16px;font-weight:700;box-shadow:0 4px 6px #0000001a;animation:toast-fade-in .3s ease-out,toast-fade-out .3s ease-in 2.7s forwards;border:1px solid rgba(255,255,255,.1)}@keyframes toast-fade-in{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes toast-fade-out{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}.update-notification{position:fixed;bottom:0;left:0;right:0;z-index:var(--z-notification, 10000);animation:slideUp .3s ease-out;pointer-events:none}@keyframes slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.update-notification-content{background:linear-gradient(135deg,#4fc3f7f2,#9333eaf2);padding:16px 20px;display:flex;align-items:center;justify-content:space-between;gap:16px;box-shadow:0 -4px 20px #0000004d;border-top:2px solid rgba(255,255,255,.3);pointer-events:auto;flex-wrap:wrap}.update-notification-text{display:flex;align-items:center;gap:12px;flex:1;min-width:200px}.update-icon{font-size:24px;animation:bounce 2s ease-in-out infinite}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.update-message{display:flex;flex-direction:column;gap:2px;color:#fff}.update-message strong{font-size:16px;font-weight:600}.update-subtitle{font-size:13px;opacity:.9}.update-notification-actions{display:flex;gap:8px;align-items:center}.update-button{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.update-button-primary{background:#fff;color:#667eea}.update-button-primary:hover{background:#f0f0f0;transform:translateY(-1px);box-shadow:0 2px 8px #0003}.update-button-primary:active{transform:translateY(0)}.update-button-secondary{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.5)}.update-button-secondary:hover{background:#ffffff1a;border-color:#fff}@media (max-width: 600px){.update-notification-content{flex-direction:column;align-items:stretch;gap:12px;padding:12px 16px}.update-notification-text{justify-content:center;text-align:center}.update-notification-actions{width:100%;justify-content:center}.update-button{flex:1}}.error-boundary-container{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#ccc;color:#333;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:var(--z-critical);font-family:Arial,sans-serif;font-size:16px;text-align:center;padding:40px;box-sizing:border-box;overflow:hidden}.error-boundary-content{background-color:#f5f5f5;padding:60px;border:1px solid #999999;max-width:600px;width:100%}.error-boundary-title{font-size:24px;margin:0 0 30px;color:#666;font-weight:400}.error-boundary-details{background-color:#eee;padding:20px;border:1px solid #dddddd;margin:20px 0;text-align:left;font-family:monospace;font-size:14px;color:#555}.error-boundary-message{font-size:14px;color:#777;margin:30px 0;line-height:1.5}.error-boundary-button{background-color:#e0e0e0;color:#333;border:1px solid #999999;padding:12px 24px;font-size:14px;cursor:pointer;margin-top:20px}.error-boundary-button:hover{background-color:#d0d0d0}.error-boundary-footer{margin-top:40px;font-size:12px;color:#aaa;border-top:1px solid #dddddd;padding-top:20px}*{font-family:monospace;box-sizing:border-box;margin:0;padding:0}:root{--tile-border-radius: 5px;--block-svg-radius: 15;--z-background: 0;--theme-animation-color: rgba(100, 100, 100, .15);--z-board: 10;--z-block: 20;--z-ui: 100;--z-floating: 200;--z-drag: 500;--z-overlay: 1000;--z-modal: 2000;--z-particles: 3000;--z-toast: 5000;--z-debug: 9000;--z-critical: 10000}.App{height:100vh;width:100vw;background:var(--theme-background, rgb(25, 25, 25));color:var(--theme-text, rgb(255, 255, 255));overflow:hidden;position:fixed;top:0;left:0}
